source qemudbg_init.in
set logging on
set strcpy(cmd[0], "help")
set strcpy(cmd[1], "echo Hello!")
set strcpy(cmd[2], "history")
set strcpy(cmd[3], "!e")
set cur_his=3
echo Current history:\n
set $r0=0
while $r0<cur_his
   p cmd[$r0++]
end
echo Processed command:\n
p cmd[3]
call find_events()
if !strcmp(cmd[3], cmd[1])
   echo Pass: the latest command starting with e is found\n
else
   echo Fail: wrong command is found\n
   p cmd[3]
end
set strcpy(cmd[4], "!h")
set cur_his=4
echo Processed command:\n
p cmd[4]
call find_events()
if !strcmp(cmd[4], cmd[2])
   echo Pass: the latest command starting with h is found\n
else
   echo Fail: wrong command is found\n
   p cmd[4]
end

